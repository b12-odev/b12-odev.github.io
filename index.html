<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>9B √ñdev Listesi</title>
<link rel="manifest" href="manifest.json">
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');

body {
  font-family:"Poppins", sans-serif;
  background: linear-gradient(180deg,#e9f5ff,#fff);
  margin:0; padding:0;
  display:flex; flex-direction:column;
  min-height:100vh;
  transition: background 0.3s ease, color 0.3s ease; 
}
h1 {text-align:center; color:#1d3557; margin-top:25px; font-size:1.8em; display:flex; align-items:center; justify-content:center;}
h1 img {height:40px; margin-right:10px; border-radius: 5px;} 
.container {flex:1; max-width:520px; margin:20px auto; background:#fff; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.1); padding:25px 20px 40px 20px; transition:0.3s ease;}
button {background:#457b9d; color:white; border:none; padding:12px; width:100%; border-radius:8px; cursor:pointer; font-weight:600; font-size:1em; transition:background 0.2s;}
button:hover {background:#356e8c;}
#toplamBtn {background:#1d3557; margin-top:15px;}
#vazgecBtn {background:#e63946; margin-top:10px;}

.form {display:none; margin-top:15px; animation:fadeIn 0.3s;}
@keyframes fadeIn {from{opacity:0; transform:translateY(-10px);}to{opacity:1; transform:translateY(0);}}
.form input, .form textarea {width:100%; margin-bottom:12px; padding:10px; border-radius:8px; border:1px solid #ccc; font-size:0.95em; transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;} 
.form label {font-size:0.9em; color:#555; display:block; margin-bottom:5px; transition: color 0.3s ease;} 

.odev {
  position:relative; 
  background:#f8f9fa; 
  border-radius:10px; 
  padding:12px 15px; 
  margin-bottom:12px; 
  box-shadow:0 2px 5px rgba(0,0,0,0.05); 
  transition:0.2s; 
  overflow: hidden;
  display: flex; 
  justify-content: space-between; 
  align-items: flex-start; 
  transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease; 
}
.odev:hover {transform:translateY(-2px); box-shadow:0 4px 10px rgba(0,0,0,0.1);}

.odev.gecmis-kart {
  opacity: 0.7;
  background: #fdfdfd;
}

.odev b {font-size:1.1em; color:#1d3557; transition: color 0.3s ease;}
.odev small {color:#666; transition: color 0.3s ease;}

.etiket {
  font-weight:bold; 
  padding:4px 12px; 
  border-radius:20px; 
  font-size:0.85em; 
  white-space:nowrap;
  margin-bottom: 5px;
}

.bugun {background:#2a9d8f; color:white;}
.yarina {background:#e9c46a; color:#333;}
.gecmis {background:#e63946; color:white;}

.bos {text-align:center; color:#777; font-size:1.1em; margin-top:20px; transition: color 0.3s ease;}
footer {text-align:center; font-size:0.9em; color:#444; margin-top:auto; padding:20px; transition: color 0.3s ease;} 
#gizli {opacity:0; text-align:center; font-size:1.1em; color:#1d3557; transition:opacity 0.5s, color 0.3s ease; font-weight:bold; padding-bottom:40px;} 
#toplamTablo {width:100%; border-collapse:collapse; margin-top:10px;}
#toplamTablo th, #toplamTablo td {border:1px solid #ccc; padding:6px; text-align:center; transition: border-color 0.3s ease;} 
#toplamTablo tbody {display:none;}


.sil-btn {
    background: none;
    border: none;
    color: #e63946; 
    font-size: 1.1em;
    cursor: pointer;
    padding: 2px 5px;
    transition: color 0.2s;
    line-height: 1;
    width: auto; 
}
.sil-btn:hover {
    color: #a82e38;
}

#temaToggle {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
    background: #f1faee;
    color: #1d3557;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 1000;
    transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease; 
}
#temaToggle:hover {
    background: #e0e0e0;
}

/* YENƒ∞: Geri Sayƒ±m Sayacƒ± Stili - Ba≈ülangƒ±√ßta Gizli */
#geriSayim {
    display: none; 
    font-size: 1.1em;
    font-weight: 600;
    text-align: center;
    color: #2a9d8f; 
    margin: 15px 0 10px 0;
    padding: 8px;
    border: 2px solid #2a9d8f;
    border-radius: 8px;
    background: #e0f8f5;
    transition: color 0.3s ease, background 0.3s ease, border-color 0.3s ease;
}

/* YENƒ∞: ≈ûampiyon Adƒ± Stili */
.champion-name {
    font-weight: 800 !important;
    color: #ffd700; 
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

/* Dark Tema CSS Sƒ±nƒ±flarƒ± */
body.dark-theme {
    background: linear-gradient(180deg, #1e1e1e, #333);
    color: #f5f5f5; 
}
.container.dark-theme {
    background: #2b2b2b;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
}
body.dark-theme h1, body.dark-theme h2 {
    color: #e0e0e0;
}
body.dark-theme h1 img { 
    background: #333; 
}
body.dark-theme .form input, body.dark-theme .form textarea { 
    background: #3c3c3c;
    color: #e0e0e0;
    border-color: #555;
}
body.dark-theme .form label { 
    color: #ccc;
}
body.dark-theme #kaydetBtn, body.dark-theme #ekleBtn { 
    background: #1a4e6e;
}
body.dark-theme #kaydetBtn:hover, body.dark-theme #ekleBtn:hover {
    background: #143e57;
}
body.dark-theme #vazgecBtn {
    background: #c2333f;
}
body.dark-theme #vazgecBtn:hover {
    background: #9d2a33;
}
body.dark-theme #toplamBtn {
    background: #12283e;
}
body.dark-theme #toplamBtn:hover {
    background: #0f2030;
}

.odev.dark-theme {
    background: #3c3c3c;
    color: #e0e0e0;
    box-shadow: 0 2px 5px rgba(255,255,255,0.1);
}
.odev.dark-theme b {
    color: #ffffff;
}
.odev.dark-theme small {
    color: #bbb;
}
body.dark-theme .bos {
    color: #aaa;
}
body.dark-theme footer p { 
    color: #bbb;
}
body.dark-theme #gizli { 
    color: #ccc;
}
body.dark-theme #toplamTablo th, body.dark-theme #toplamTablo td { 
    border-color: #555;
}
body.dark-theme #temaToggle { 
    background: #4a4a4a;
    color: #f1faee;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}
body.dark-theme #temaToggle:hover {
    background: #5a5a5a;
}
.dark-theme .sil-btn { 
    color: #ff7f87; 
}

/* Koyu Temada Geri Sayƒ±m Sayacƒ± */
body.dark-theme #geriSayim {
    color: #79d7c8;
    background: #153c35;
    border-color: #79d7c8;
}
body.dark-theme .champion-name {
    color: #ff9900; 
    text-shadow: 1px 1px 2px rgba(255,255,255,0.2);
}

body.dark-theme #installBtn {
  background: #bb620a !important;
  color: #fff !important;
}
body.dark-theme #installBtn:hover {
  background: #994f08 !important;
}
</style>
</head>
<body>

<button id="temaToggle">‚òÄÔ∏è</button> 

<h1><img src="logo.png" alt="Okul Logo">9B √ñdev Listesi</h1>
<div class="container" id="mainContainer">

<button id="ekleBtn">+ √ñdev Ekle</button>
<div class="form" id="odevForm">
  <input list="dersList" type="text" id="ders" placeholder="Ders adƒ±" required>
  <datalist id="dersList"></datalist>
  <textarea id="aciklama" placeholder="√ñdev a√ßƒ±klamasƒ±" rows="2" required></textarea>
  <label for="tarih">√ñdev ne zamana:</label>
  <input type="date" id="tarih" required>
  <input list="ekleyenList" type="text" id="ekleyen" placeholder="Ekleyen (isteƒüe baƒülƒ±)">
  <datalist id="ekleyenList"></datalist>
  <button id="kaydetBtn">Kaydet</button>
  <button id="vazgecBtn"> Vazge√ß</button>
</div>

<h2>G√ºncel √ñdevler</h2>
<div id="liste"></div>

<button id="toplamBtn">En √áok √ñdev Y√ºkleyenler ‚ñº</button>
<div id="geriSayim"></div>

<table id="toplamTablo">
  <thead><tr><th>#</th><th>√ñƒürenci</th><th>√ñdev Sayƒ±sƒ±</th></tr></thead>
  <tbody></tbody>
</table>

</div>

<footer><p>Erdem Ata tarafƒ±ndan yapƒ±ldƒ±</p></footer>
<p id="gizli">Sƒ±nƒ±fƒ± i√ßin yaptƒ± üòè</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, query, orderBy, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyADRrn05EmhYR4eZoA9JegJ0ESpw2fPI4g",
  authDomain: "dokuzbode.firebaseapp.com",
  projectId: "dokuzbode",
  storageBucket: "dokuzbode.firebasestorage.app",
  messagingSenderId: "43132793959",
  appId: "1:43132793959:web:f4905f1a6503983d0a10c2"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ekleBtn = document.getElementById("ekleBtn");
const odevForm = document.getElementById("odevForm");
const kaydetBtn = document.getElementById("kaydetBtn");
const vazgecBtn = document.getElementById("vazgecBtn");
const liste = document.getElementById("liste");
const toplamBtn = document.getElementById("toplamBtn");
const toplamTabloBody = document.querySelector("#toplamTablo tbody");
const dersList = document.getElementById("dersList");
const ekleyenList = document.getElementById("ekleyenList");
const geriSayimDiv = document.getElementById("geriSayim"); // YENƒ∞: Geri sayƒ±m div'i

const temaToggle = document.getElementById("temaToggle");
const mainContainer = document.getElementById("mainContainer");
const BODY = document.body;
let latestOdevlerData = []; 

function getHiddenOdevIds() {
    const hiddenIdsJson = localStorage.getItem('hiddenOdevler');
    return hiddenIdsJson ? JSON.parse(hiddenIdsJson) : [];
}

function setHiddenOdevId(odevId) {
    const hiddenIds = getHiddenOdevIds();
    if (!hiddenIds.includes(odevId)) {
        hiddenIds.push(odevId);
        localStorage.setItem('hiddenOdevler', JSON.stringify(hiddenIds));
    }
}

function triggerLocalListUpdate() {
    updateHomeworkList(latestOdevlerData);
}

ekleBtn.addEventListener("click", ()=>{
  odevForm.style.display="block";
  ekleBtn.style.display="none";
});

vazgecBtn.addEventListener("click", ()=>{
  odevForm.style.display="none";
  ekleBtn.style.display="block";
});


kaydetBtn.addEventListener("click", async ()=>{
  const ders = document.getElementById("ders").value.trim();
  const aciklama = document.getElementById("aciklama").value.trim();
  const tarih = document.getElementById("tarih").value;
  const ekleyen = document.getElementById("ekleyen").value.trim(); // Bo≈ü olabilir

  if(!ders || !aciklama || !tarih){alert("L√ºtfen t√ºm alanlarƒ± doldur!"); return;}

  const yuklenmeZamaniStr = new Date().toISOString();
  
  // √ñdevler koleksiyonuna kaydederken ekleyen bo≈üsa null olarak kaydet (Listede "Anonim" g√∂r√ºn√ºr)
  await addDoc(collection(db,"odevler"),{
    ders, aciklama, tarih, ekleyen: ekleyen || null, yuklenmeZamani: yuklenmeZamaniStr
  });

  // Loga sadece isim varsa ekle (Anonimleri hari√ß tutar)
  if (ekleyen) {
    await addDoc(collection(db, "odevLog"), {
      ekleyen: ekleyen,
      timestamp: yuklenmeZamaniStr 
    });
  }
  
  document.getElementById("ders").value="";
  document.getElementById("aciklama").value="";
  document.getElementById("tarih").value="";
  document.getElementById("ekleyen").value="";
  odevForm.style.display="none";
  ekleBtn.style.display="block";

  await eskiOdevleriSil();
});


function setupHomeworkListener() {
  const q = query(collection(db, "odevler"), orderBy("yuklenmeZamani", "asc"));
  
  onSnapshot(q, (snapshot) => {
    latestOdevlerData = []; 
    snapshot.forEach(doc => latestOdevlerData.push({ ...doc.data(), id: doc.id }));
    
    updateHomeworkList(latestOdevlerData); 
    updateAutocompleteLists(latestOdevlerData); 
  });
}

function setupLeaderboardListener() {
  const q = query(collection(db, "odevLog")); 
  
  onSnapshot(q, (snapshot) => {
    const logEntries = [];
    snapshot.forEach(doc => logEntries.push(doc.data()));
    
    updateLeaderboard(logEntries); 
  });
}


function updateHomeworkList(odevler) {
  liste.innerHTML = "";
  const bugunTarih = new Date();
  bugunTarih.setHours(0, 0, 0, 0);

  const hiddenOdevIds = getHiddenOdevIds(); 

  const processedHomeworks = odevler.map(o => {
    if (!o.tarih) return { ...o, etiket: "" }; 
    const tarihParcalari = o.tarih.split('-').map(Number);
    const teslim = new Date(tarihParcalari[0], tarihParcalari[1] - 1, tarihParcalari[2]);

    const farkGun = Math.round((teslim - bugunTarih) / (1000 * 60 * 60 * 24));
    let etiket = "";

    if (farkGun < 0) etiket = "gecmis";
    else if (farkGun === 0) etiket = "bugun";
    else if (farkGun === 1) etiket = "yarina";
    
    return { ...o, etiket };
  });

  const visibleHomeworks = processedHomeworks.filter(o => !hiddenOdevIds.includes(o.id));

  const aktifOdevler = visibleHomeworks.filter(o => o.etiket !== "gecmis");

  if (aktifOdevler.length === 0) {
    const mesajlar = ["Bug√ºnl√ºk √∂dev yok üòé", "Rahatla, √∂dev yok üßò", "G√ºn√ºn keyfini √ßƒ±kar üéÆ"];
    liste.innerHTML = `<div class='bos'>${mesajlar[Math.floor(Math.random() * mesajlar.length)]}</div>`;
  }

  visibleHomeworks.sort((a, b) => {
    const order = { "yarina": 1, "bugun": 2, "": 3, "gecmis": 4 };
    if (order[a.etiket] !== order[b.etiket]) return order[a.etiket] - order[b.etiket];
    const aTarih = new Date(a.tarih.split('-')[0], a.tarih.split('-')[1] - 1, a.tarih.split('-')[2]);
    const bTarih = new Date(b.tarih.split('-')[0], b.tarih.split('-')[1] - 1, b.tarih.split('-')[2]);
    return aTarih - bTarih;
  });

  const currentThemeClass = BODY.classList.contains('dark-theme') ? 'dark-theme' : '';
  
  visibleHomeworks.forEach(o => {
    let etiketHTML = "";
    let kartClass = "";
    
    if (o.etiket === "bugun") etiketHTML = `<span class="etiket bugun">Bug√ºneüò¨</span>`;
    else if (o.etiket === "yarina") etiketHTML = `<span class="etiket yarina">Yarƒ±naüî•üî•</span>`;
    else if (o.etiket === "gecmis") {
      etiketHTML = `<span class="etiket gecmis">S√ºresi Doldu</span>`;
      kartClass = "gecmis-kart";
    }
    
    
    const ekleyenAdi = o.ekleyen || 'Anonim'; 
    let silButonuHTML = `<button class="sil-btn" data-id="${o.id}">üóëÔ∏è</button>`;
    
    liste.innerHTML += `
    <div class="odev ${kartClass} ${currentThemeClass}">
      <div style="flex-grow: 1;">
        <b>${o.ders}</b><br>
        <span>${o.aciklama}</span><br>
        <small>Son tarih: ${o.tarih} <br> Ekleyen: ${ekleyenAdi}</small>
      </div>
      <div style="display: flex; flex-direction: column; align-items: flex-end;">
        ${etiketHTML}
        ${silButonuHTML}
      </div>
    </div>`;
  });
  
  document.querySelectorAll('.sil-btn').forEach(button => {
    button.addEventListener('click', (e) => {
        const odevId = e.target.dataset.id;
        if (confirm("Bu √∂devi SADECE kendinizden  gizlemek istediƒüinize emin misiniz?")) {
            setHiddenOdevId(odevId); 
            triggerLocalListUpdate(); 
        }
    });
  });
}

function updateLeaderboard(logEntries) {
  toplamTabloBody.innerHTML = "";
  const sayac = {};
  
  logEntries.forEach(entry => { 
    // Ekleyeni al, bo≈üluklarƒ± temizle ve k√º√ß√ºk harfe √ßevir
    const ek = (entry.ekleyen || '').trim().toLowerCase(); 
    
    // 1. Fƒ∞LTRE: Bo≈ü, null veya "anonim" yazanlarƒ± sayma
    if (ek && ek !== "anonim") { 
        const originalName = entry.ekleyen.trim();
        sayac[originalName] = (sayac[originalName] || 0) + 1;
    }
  });
  
  // 2. Sƒ±ralamayƒ± yap
  const entries = Object.entries(sayac).sort((a, b) => b[1] - a[1]);
  
  // 3. Maksimum sayƒ±yƒ± bul (Beraberlik kontrol√º i√ßin)
  const maxCount = entries.length > 0 ? entries[0][1] : 0;
  
  // 4. Tabloyu √ßiz
  entries.forEach((e, i) => {
    let isim = e[0];
    let classAttribute = '';

    // ≈ûampiyon kontrol√º
    if (e[1] === maxCount && maxCount > 0) {
        isim = `üëë ${e[0]}`;
        classAttribute = 'class="champion-name"';
    }
    
    toplamTabloBody.innerHTML += `<tr><td>${i + 1}</td><td ${classAttribute}>${isim}</td><td>${e[1]}</td></tr>`;
  });
}

function updateAutocompleteLists(odevler) {
  const dersSet = new Set();
  const ekleyenSet = new Set();
  odevler.forEach(o => {
    if(o.ders) dersSet.add(o.ders);
    // Otomatik tamamlama listesine sadece ismini yazanlarƒ± ekle
    if(o.ekleyen) ekleyenSet.add(o.ekleyen); 
  });
  dersList.innerHTML = "";
  ekleyenList.innerHTML = "";
  dersSet.forEach(d => dersList.innerHTML += `<option value="${d}">`);
  ekleyenSet.forEach(e => ekleyenList.innerHTML += `<option value="${e}">`);
}


toplamBtn.addEventListener("click", ()=>{
  if(toplamTabloBody.style.display==="table-row-group"){
    toplamTabloBody.style.display="none";
    geriSayimDiv.style.display = "none"; // Geri sayƒ±mƒ± gizle
    toplamBtn.textContent="En √áok √ñdev Y√ºkleyenler ‚ñº";
  } else {
    toplamTabloBody.style.display="table-row-group";
    geriSayimDiv.style.display = "block"; // Geri sayƒ±mƒ± g√∂ster
    toplamBtn.textContent="En √áok √ñdev Y√ºkleyenler ‚ñ≤";
  }
});

async function eskiOdevleriSil(){
  const snapshot = await getDocs(collection(db,"odevler"));
  const bugun = new Date(); bugun.setHours(0,0,0,0);
  snapshot.forEach(async docu=>{
    const o = docu.data();
    if (!o.tarih || !o.ders) return;
    const teslim = new Date(o.tarih);
    const farkGun = (bugun - teslim)/(1000*60*60*24);
    if(farkGun >= 1){ 
      await deleteDoc(doc(db,"odevler",docu.id));
    }
  });
}

window.addEventListener("scroll",()=>{
  const gizli=document.getElementById("gizli");
  if(window.innerHeight+window.scrollY>=document.body.offsetHeight-10) gizli.style.opacity="1";
  else gizli.style.opacity="0";
});


function applyTheme(isDark) {
    if (isDark) {
        BODY.classList.add('dark-theme');
        mainContainer.classList.add('dark-theme');
        temaToggle.textContent = 'üåô';
        localStorage.setItem('theme', 'dark');
    } else {
        BODY.classList.remove('dark-theme');
        mainContainer.classList.remove('dark-theme');
        temaToggle.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'light');
    }
    triggerLocalListUpdate();
}

temaToggle.addEventListener('click', () => {
    const currentTheme = localStorage.getItem('theme') || 'light';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    applyTheme(newTheme === 'dark');
});

(function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (savedTheme === 'dark' || (savedTheme === null && prefersDark)) {
        applyTheme(true);
    } else {
        applyTheme(false);
    }
})();

function startCountdown() {
    // √ñrnek bir biti≈ü tarihi: 1 Kasƒ±m 2025, saat 23:59
    const targetDate = new Date("November 25, 2025 00:00:00").getTime();

    const interval = setInterval(() => {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
            clearInterval(interval);
            geriSayimDiv.innerHTML = "üèÜ YARI≈ûMA Bƒ∞TTƒ∞! ≈ûampiyonu Tebrikler!";
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

        geriSayimDiv.innerHTML = `
            AYIN ≈ûAMPƒ∞YONU ƒ∞√áƒ∞N SON: 
            ${days} G√ºn, ${hours} Saat, ${minutes} Dakika
        `;

    }, 1000 * 60); // Her dakika g√ºncelle

    // ƒ∞lk y√ºklemede hemen √ßalƒ±≈ütƒ±r
    const initialDistance = targetDate - new Date().getTime();
    if (initialDistance >= 0) {
        const days = Math.floor(initialDistance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((initialDistance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((initialDistance % (1000 * 60 * 60)) / (1000 * 60));
        geriSayimDiv.innerHTML = `
            AYIN ≈ûAMPƒ∞YONU ƒ∞√áƒ∞N SON: 
            ${days} G√ºn, ${hours} Saat, ${minutes} Dakika
        `;
    }
}


// BA≈ûLANGI√á √áAƒûRILARI
setupHomeworkListener();    
setupLeaderboardListener(); 
eskiOdevleriSil();          
startCountdown(); // YENƒ∞: Geri sayƒ±m ba≈ülatƒ±ldƒ±

setInterval(async ()=>{
  await eskiOdevleriSil();
}, 2 * 60 * 1000); 
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js')
      .then(registration => console.log('ServiceWorker kaydedildi:', registration.scope))
      .catch(error => console.log('ServiceWorker hatasƒ±:', error));
  });
}
</script>

<button id="installBtn" style="position: fixed; bottom: 25px; right: 25px; background: #ff7f11; color: white; border: none; border-radius: 50px; padding: 14px 20px; font-weight: 600; box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; z-index: 999; display: none;">üì≤ Ana ekrana ekle</button>
<script>
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  installBtn.style.display = "none";
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log("Kullanƒ±cƒ± se√ßimi:", outcome);
    deferredPrompt = null;
  }
});

window.addEventListener("appinstalled", () => {
  console.log("Uygulama ana ekrana eklendi!");
});
</script>
</body>
</html>
